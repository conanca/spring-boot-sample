version: '2'
services:

  mongodata:
    image: reg.news.cn/library/xh-baseimage:3.4
    volumes:
      - /data/db
    command: /bin/true

  mongodb:
    restart: always
    image: tutum/mongodb
    environment:
      - MONGODB_USER=user7
      - MONGODB_PASS=xinhua
      - MONGODB_DATABASE=demo-spring-boot
    volumes_from:
      - mongodata

  web:
    restart: always
    build: .
    links:
      - mongodb
    ports:
      - 8080:8080